# =================================================================
# EUREKA SERVER FIXED CONFIGURATION
# =================================================================

# Server Configuration
server.port=8761
spring.application.name=service-registry

# Performance Settings
server.compression.enabled=true
server.compression.min-response-size=1024
server.compression.mime-types=application/json,application/xml,text/html

# =================================================================
# EUREKA SERVER CORE SETTINGS
# =================================================================

# Self Registration (Eureka Server shouldn't register with itself)
eureka.client.register-with-eureka=false
eureka.client.fetch-registry=false

# Service URL Configuration
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/

# FIXED: Self Preservation Mode - DISABLE for development
eureka.server.enable-self-preservation=false

# FIXED: Faster eviction for development
eureka.server.eviction-interval-timer-in-ms=5000

# =================================================================
# CLIENT BEHAVIOR SETTINGS
# =================================================================

# Heartbeat Settings - faster for development
eureka.instance.lease-renewal-interval-in-seconds=5
eureka.instance.lease-expiration-duration-in-seconds=10
eureka.instance.prefer-ip-address=true

# =================================================================
# DASHBOARD CONFIGURATION - FIXED
# =================================================================

# Enable Dashboard
eureka.dashboard.enabled=true
eureka.dashboard.path=/

# FIXED: Response cache settings for faster updates
eureka.server.response-cache-auto-expiration-in-seconds=10
eureka.server.response-cache-update-interval-ms=2000

# =================================================================
# SECURITY CONFIGURATION - SIMPLIFIED
# =================================================================

# Basic Authentication
spring.security.user.name=eureka-admin
spring.security.user.password=eureka123
spring.security.user.roles=ADMIN

# =================================================================
# LOGGING CONFIGURATION
# =================================================================

# Log Levels
logging.level.com.sandeep=DEBUG
logging.level.com.netflix.eureka=INFO
logging.level.com.netflix.discovery=INFO
logging.level.org.springframework.cloud.netflix.eureka=INFO
logging.level.org.springframework.security=DEBUG
logging.level.root=INFO

# Log File
logging.file.name=logs/service-registry.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.console=%d{HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# =================================================================
# ACTUATOR CONFIGURATION - FIXED
# =================================================================

# Exposed Endpoints
management.endpoints.web.exposure.include=health,info,metrics,eureka,beans,env

# Health Check Details
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always

# Management Port (same as server port)
management.server.port=8761

# =================================================================
# DEVELOPMENT SETTINGS
# =================================================================

# Network Timeouts
eureka.server.peer-eureka-nodes-update-interval-ms=5000
eureka.server.peer-eureka-status-refresh-time-interval-ms=5000

# FIXED: Disable unnecessary warnings
eureka.client.webclient.enabled=false
