# =================================================================
# COLLEGE SERVICE BOOTSTRAP CONFIGURATION
# This file configures the College Service to get settings from Config Server
# Following the same pattern as Service Registry
# =================================================================

# =================================================================
# APPLICATION IDENTITY
# =================================================================
# What: The name of this application for Config Server identification
# Why: Config Server uses this name to find college-service.properties file
spring.application.name=college-service

# --- Server Port ---
# What: The port this College Service runs on
# Why: 8081 is assigned to College Service in the microservices architecture
server.port=8081

# --- Database Connection
# What: PostgreSQL connection details for local development
# Why: Allows service to start even without Config Server
spring.datasource.url=jdbc:postgresql://localhost:5432/collegedb
spring.datasource.username=postgres
spring.datasource.password=admin
spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA Configuration
# What: JPA and Hibernate settings for database operations
# Why: Ensures proper database interaction and entity mapping
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# --- Flyway Migration
# What: Database migration settings for schema version control
# Why: Ensures database schema is properly created and updated
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=true

# =================================================================
# EUREKA CLIENT BASIC SETTINGS
# =================================================================
# What: Service discovery settings for Eureka registration
# Why: Allows other services to discover and communicate with College Service

# --- Service Registration ---
# What: Should this service register with Eureka Server?
# Why: Yes, so other services (Department, Student) can discover it
eureka.client.register-with-eureka=true

# What: Should this service fetch registry information from Eureka?
# Why: Yes, for future service-to-service communication capabilities
eureka.client.fetch-registry=true

# What: The URL where this service can find the Eureka Server
# Why: All microservices need to know where Service Registry is located
eureka.client.service-url.defaultZone=http://eureka-admin:eureka123@localhost:8761/eureka/

# What: Creates a unique identifier for this service instance in Eureka
# Why: Multiple instances of same service need unique IDs for proper registration
# Format: college-service:8081 (makes it easy to identify in Eureka dashboard)
# Example: If you run 2 College Services on ports 8081 and 8082, they'll have different IDs
eureka.instance.instance-id=${spring.application.name}:${server.port}

# What: Use IP address instead of hostname for service communication
# Why: More reliable in Docker/cloud environments where hostnames might change
# Benefit: Other services can reach this service using IP (e.g., 192.168.1.100:8081)
# Alternative: If false, uses hostname (e.g., DESKTOP-CHFHTO3:8081)
eureka.instance.prefer-ip-address=true

# What: How often this service sends "I'm alive" heartbeat to Eureka
# Why: Eureka needs to know service is still running and healthy
# Default: 30 seconds (we use 10 for faster detection during development)
# Impact: More frequent heartbeats = faster failure detection but more network traffic
eureka.instance.lease-renewal-interval-in-seconds=10

# What: How long Eureka waits without heartbeat before marking service as DOWN
# Why: If service crashes, Eureka removes it from registry after this time
# Default: 90 seconds (we use 30 for faster cleanup during development)
# Impact: Shorter duration = faster failover but less tolerance for network issues
eureka.instance.lease-expiration-duration-in-seconds=30

# =================================================================
# MANAGEMENT ENDPOINTS (Health Checks and Monitoring)
# =================================================================
# What: Which monitoring endpoints should be available via HTTP
# Why: Essential endpoints for health checking and system monitoring
management.endpoints.web.exposure.include=*

# What: How much detail to show in health check responses
# Why: Detailed health information helps with debugging and monitoring
management.endpoint.health.show-details=always

# =================================================================
# LOGGING CONFIGURATION
# =================================================================
# What: Log level for College Service application code
# Why: DEBUG level for detailed development logging
# How: Shows method execution, data flow, business logic
logging.level.com.sandeep.college_service=DEBUG

# What: Log level for Feign client operations
# Why: Shows HTTP requests/responses to College Service
# How: DEBUG level logs request URL, headers, response status
logging.level.feign=DEBUG

# What: Log level for Spring Web components
# Why: Shows HTTP request/response processing
# How: INFO level shows important web events without noise
logging.level.org.springframework.web=INFO

# What: Log level for Spring Data JPA operations
# Why: Shows repository method execution
# How: INFO level shows important data access events
logging.level.org.springframework.data=INFO

# What: Log level for Hibernate SQL queries
# Why: Shows executed SQL statements
# How: INFO level shows SQL without parameter values
logging.level.org.hibernate.SQL=INFO

# What: Log level for SQL parameter binding
# Why: Shows parameter values in SQL queries (if needed)
# How: INFO level shows basic binding information
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=INFO

# What: Default log level for all other code
# Why: Manageable console output during development
# How: INFO level shows important events without excessive detail
logging.level.root=INFO

# What: Console log message format
# Why: Clean, readable format for development
# How: Includes timestamp, thread, level, logger, message
logging.pattern.console=%d{HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
